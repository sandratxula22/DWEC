
<!DOCTYPE html>
<html>

<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QWKWPBDEFK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QWKWPBDEFK');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-4669394804436935",
    enable_page_level_ads: true
  });
</script>

<title>Vistas diferidas : @defer (when [expresión lógica]) {}</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">    
<meta name="keywords" content="Angular, programación, tutorial">
<meta name="description" content="El objetivo de este tutorial 
es presentar los conceptos básicos del framework Angular">
<meta name="author" content="Diego Moisset">


<link href="../css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="estilos.css">

<style>
html,body {
	background-color: #D3E9D0;
	font-family: sans-serif,arial;

}
</style>

<style>
.uno { width: 320px; height: 100px; }
@media(min-width: 500px) { .uno { width: 320px; height: 100px; } }
@media(min-width: 800px) { .uno { width: 336px; height: 280px; } }

.dos { width: 320px; height: 100px; }
@media(min-width: 500px) { .dos { width: 320px; height: 100px; } }
@media(min-width: 800px) { .dos { width: 336px; height: 280px; } }
</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80268657-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body>


<div class="container">

<div class="row">
  <div class="col-md-12">

<div class="titulodetalle">
<h1>44 - Vistas diferidas : @defer (when [expresión lógica]) {}</h1></div>

  </div>
</div>  


<div class="row">
  <div class="col-md-12">

<div class="cuerpodetalle">
<div style="display:block;float:left;margin: 5px;"> 
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- adaptable1 -->
<ins class="adsbygoogle uno"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="4716538363"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
</div> 


<p>Otra variante que podemos implementar con las vistas diferidas es utilizando la palabra clave when con una expresión lógica que retorne true o false. La vista se materializará cuando la expresión lógica se verifique verdadera.</p>
<p>Creemos un proyecto y veamos el funcionamiento de esta variante de vista diferida:</p>
<pre>
ng new proyecto030
</pre>

<p>En el archivo 'app.component.ts' definimos un atributo que almacene el valor false:</p>
<pre class="recuadro">
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';

@Component({
  selector: 'app-root',
  imports: [RouterOutlet],
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {
  visible = false;
}
</pre>

<p>La la plantilla 'app.component.html' queda con el siguiente código:</p>
<pre class="recuadro">
&lt;p&gt;¿Quién descubrió America?&lt;/p&gt;
&lt;input type="button" (click)="visible=true" value="mostrar respuesta"&gt;
@defer (when visible) {
  &lt;p&gt;Respuesta:Cristóbal Colón&lt;/p&gt;
} @placeholder {
  &lt;p&gt;¿?&lt;/p&gt;
}
&lt;router-outlet /&gt;
</pre>
<p>Como el atributo visible almacena el valor false, el bloque de código no se renderiza. Luego cuando presionamos el botón cambiamos el valor del atributo visible por el valor false, en dicho momento se hace visible el bloque de código definido en el @defer.</p>
<p>Tener en cuenta que en una aplicación más realista en el bloque @defer tendremos una componente, que se cargará con lazy loading una vez que el when se verifique con el valor true.</p>
<p>Podemos probar esta aplicación en la web <a href="https://ejerciciostutorialesya.com/angulardev/proyecto030/" target="_blank">aquí</a>.</p>
<p>Podemos utilizar también el prefetch, para el caso en que sea una componente su contenido se recupere del servidor inmediatamente y cuando el when se verifique verdadero, la componente se renderize inmediatamente:</p>
<pre>
@defer (when visible;prefetch on idle) {
&lt;p&gt;Respuesta:Cristóbal Colón&lt;/p&gt;
} @placeholder {
&lt;p&gt;¿?&lt;/p&gt;
}
</pre>


<div class="botonretorno"><a href="index.php@inicio=40.html">Retornar</a></div> 

<div>
<!--publi-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--publi-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- adaptable2 -->
<ins class="adsbygoogle dos"
     style="display:inline-block"
     data-ad-client="ca-pub-4669394804436935"
     data-ad-slot="5774469161"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div>




</div>

  </div>
</div>  

</div>

<script type="text/javascript">
function cambiar()
{
  var lista=document.getElementsByTagName('pre');
  for(f=0;f<lista.length;f++)
  {
   lista[f].style.display='block';
  }
  document.getElementById('solucion').style.display='none';
}

</script>

</body>

</html>
